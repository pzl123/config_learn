# 全局配置
[global]
# 严格模式，默认开启
strict init = true
# 日志重载周期，单位可以是 M（百万条）、K（千条）、H（小时）
reload conf period = 10M
# 日志缓冲区配置
buffer min = 1024    # 最小缓冲区大小（字节）
buffer max = 2MB     # 最大缓冲区大小（字节）

# 日志锁文件配置
rotate lock file = self

# 默认日志格式
default format = "%d(%F %T.%l) %-6V (%c:%F:%L) - %m%n"

# 文件权限
file perms = 600

# 文件同步周期，单位可以是 K（千条）、H（小时）
fsync period = 1K

# 自定义日志级别
[levels]
TRACE = 10
CRIT = 130, LOG_CRIT

# 日志格式定义
[formats]
simple = "%m%n"          # 简单格式，只有消息
normal = "%d(%F %T.%l) %m%n"  # 带时间戳和文件名

# 日志输出规则
[rules]
# 默认类别输出到标准输出
default.FATAL       >stderr; simple

# 自定义类别输出规则
my_cat.>INFO       >stdout; normal

# 日志级别 >= INFO 输出到标准错误
my_.INFO        >stderr

# 日志级别 == DEBUG 输出到 syslog
my_dog.=DEBUG       >syslog, LOG_LOCAL0; simple

# 日志级别 == CRIT 输出到文件
my_critical.=CRIT       "critical.log"; normal

# 日志文件轮换配置
# 输出到文件，并按大小和日期轮换
*.*         -"%12.2E(HOME)/log/%c.log", \
            1MB * 12 ~ "%E(HOME)/log/%c.%D(%F) #2r #3s.log"; \
            normal

# 自定义输出
my_mice.*       $record_func , "record_path%c"; normal